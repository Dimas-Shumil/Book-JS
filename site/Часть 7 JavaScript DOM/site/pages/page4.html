<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../css/sass.css">
    <title>DOM JS</title>
</head>

<body>
    <header class="header">
        <nav class="header__nav">

            <div class="header__nav-title">
                4. Работа с событиями
            </div>

            <ul class="header__nav-ul">
                <li><a href="../../index.html"><span class="header__nav-ul_link"></span></a></li>
                <li><a href="page2.html"><span class="header__nav-ul_link"></span></a></li>
                <li><a href="page3.html"><span class="header__nav-ul_link"></span></a></li>
                <li><a href="#" title="Работа с событиями"><span class="header__nav-ul_link"></span></a></li>
                <li><a href="page5.html"><span class="header__nav-ul_link"></span></a></li>
                <li><a href="page6.html"><span class="header__nav-ul_link"></span></a></li>
                <li><a href="page7.html"><span class="header__nav-ul_link"></span></a></li>
            </ul>
        </nav>
    </header>
    <hr class="hr">
    </div>

    <div class="main">
        <div class="main__wrapper">
            <div id="mySidenav" class="sidenav">
                <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
                <a href="#" target="_blank"> Часть 1 Введение в JavScript</a>
                <a href="#">Часть 2 Введение в JavaScript</a>
                <a href="#">Часть 3 Введение в JavaScript</a>
                <a href="#">Часть 4 Функции JavaScript</a>
                <a href="#">часть 5 Функции и объекты JavaScript</a>
                <a href="#">часть 6 JavaScript Объекты</a>
                <a href="#">Часть 7 JavaScript DOM</a>
                <a href="#">Часть 8 Бонус Ассинхронное программирование JavaScript</a>
                <a href="#">Часть 9 Бонус DOM</a>
                <a href="#">Часть 10 AJAX</a>
                <a href="#">Часть 12 Тестирование JS</a>
                <a href="#">Часть11 API браузера</a>
            </div>
            <span class="sidenav__btn" onclick="openNav()">&#9776;</span>
            <!-- <span class="sidenav__btn" style="font-size:30px;cursor:pointer; border: 1px solid grey;" onclick="openNav()">&#9776; Открыть</span> -->

            <div class="main__wrapper-conteiner">

                <figure>
                    <img src="../images/m13_cover_Events.svg" width="50%" alt="">
                </figure>

                <h2>Введение в события</h2>
                <hr class="hr">

                <div class="main__wrapper-border_green">
                    <p><span class="green">Событие</span> (<em>event</em>) — сигнал от браузера о том, что что-то
                        произошло.</p>
                </div>
                <p>Они возникают, когда происходит какое-то взаимодействие:</p>
                <div class="main__wrapper-box_grey">
                    <p> &bull; Пользователь кликнул на кнопку,</p>
                    <p> &bull; Страница загрузилась,</p>
                    <p> &bull; Инпут был изменён.</p>
                    <p>И так далее.</p>
                </div>

                <p>Изменение может быть спровоцировано каким-то внутренним изменением состояния браузера или действиями
                    пользователя.</p>
                <p>Справочник по событиям <a href="https://developer.mozilla.org/ru/docs/Web/Events">здесь</a>.</p>
                <p>В рамках этого модуля мы будем рассматривать DOM-events.</p>

                <h2>HTML page lifecycle</h2>

                <p>У HTML-страницы есть события (события загрузки страницы):</p>

                <blockquote>1. <span class="green">DOMContentLoaded</span> — построено DOM-дерево, но
                    скрипты/стили/контент ещё не подгружены. Срабатывает
                    на объекте <span class="blue">document</span>, отлавливается с помощью <span
                        class="blue">addEventListener</span>.</blockquote>
                <p>Можно искать DOM-узлы и инициализировать интерфейс.</p>

                <blockquote>2. <span class="green">load </span> — полностью загруженная HTML-страница. Обработать можно,
                    обратившись к свойству <span class="blue">window.onload</span>.</blockquote>
                <blockquote>Можно отскроллить страницу до нужного места (пример: онлайн-банки, таблицы), рассчитать
                    размеры элементов.</blockquote>

                <blockquote>3. <span class="green">beforeunload</span> — пользователь хочет покинуть страницу <span
                        class="blue">window.beforeunload</span></blockquote>
                <blockquote>Можно спросить, действительно ли пользователь хочет уйти.</blockquote>

                <blockquote>4. <span class="green">unload</span> — пользователь почти покинул страницу <span
                        class="blue">window.unload</span></blockquote>
                <blockquote>Можно отправить метрики или статистику для анализа страницы.</blockquote>
                <p>Подробнее <a href="https://javascript.info/onload-ondomcontentloaded">здесь</a>.</p>

                <h2>Работа с событиями</h2>

                <p>Когда необходимо среагировать на событие, мы назначаем обработчик.</p>
                <p>То есть, задаём функцию, которая сработает, как только событие произошло. Именно благодаря
                    обработчикам JavaScript может реагировать на действия пользователя.</p>
                <p>Есть несколько способов назначить обработчики. </p>
                <blockquote>1. Используя атрибут или DOM свойство. Наглядное объяснение в видео ниже.</blockquote>
                <hr class="hr">

                <h2>Назначение события ч.1</h2>
                <hr class="hr">

                <p>Обработчик навешивается на атрибут в тег, к названию события добавляется приставка on. Обработчик
                    либо прописывается внутри, либо в скрипте.</p>
                <p><b>Внутри:</b></p>

                <div class="main__wrapper-box_grey">
                    <p>&lsaquo;button onclick="alert('Clicked!')">Press&lsaquo;/button></p>
                </div>

                <p><b>В скрипте:</b></p>

                <div class="main__wrapper-box_grey">
                    <p>&lsaquo;script></p>
                    <blockquote>function clickMe() {</blockquote>
                    <blockquote>
                        <blockquote> alert('Clicked!')</blockquote>
                    </blockquote>
                    <p>}</p>
                    <p> &lsaquo;/script></p>
                    <p> &lsaquo;button onclick="clickMe()">Press&lsaquo;/button></p>
                </div>

                <div class="main__wrapper-box_pink">
                    <p><b>ВАЖНО!</b> Атрибут HTML-тега не чувствителен к регистру, поэтому <em>ONCLICK</em> будет
                        работать так
                        же, как <em>onClick</em> и <em>onCLICK</em>. Однако атрибуты пишут в нижнем регистре, это
                        считается <em>best
                            practices: onclick</em>.</p>
                </div>

                <p>Обработчик назначается посредством использования DOM-свойства элемента. Поиск элемента в таком случае
                    происходит по <em>id</em>.</p>

                <div class="main__wrapper-box_grey">
                    <p>&lsaquo;button onclick="alert("HTML clicked")" id="btn">Press&lsaquo;/button></p>
                    <p>&lsaquo;script></p>
                    <blockquote>btn.onclick = function() { // перезапишет существующий обработчик</blockquote>
                    <blockquote>
                        <blockquote>alert('JS clicked'); // выведется это</blockquote>
                    </blockquote>
                    <blockquote>};</blockquote>
                    <p>&lsaquo;/script></p>

                </div>

                <div class="main__wrapper-box_pink">
                    <p><b>ВАЖНО!</b> Атрибут <em>onclick</em> (как и любой другой) может быть только один. Поэтому, если
                        в скрипте и теге есть одинаковые обработчики, тот, что будет прочитан последним, перезапишет
                        остальные.</p>
                </div>

                <p>Обработчиком можно назначить и уже существующую функцию:</p>

                <div class="main__wrapper-box_grey">
                    <p>function clickMe() {</p>
                    <blockquote> alert('Clicked!')</blockquote>
                    <p>}</p>
                    <p>btn.onclick = clickMe;</p>
                </div>

                <p>Убрать обработчик можно назначением elem.onclick = null.</p>

                <div class="main__wrapper-box_pink">
                    <p><b>ВАЖНО!</b> В случае добавления функции через скрипт, а не атрибут, скобки добавлять не стоит,
                        так как в <em>onclick</em> вместо обработчика запишется результат —<em> undefined</em>.</p>
                </div>
                <h2><b>JavaScript</b></h2>

                <div class="main__wrapper-box_grey">
                    <p>function clickMe() {</p>
                    <blockquote>alert('Clicked!')</blockquote>
                    <p>}</p>
                    <p>btn.onclick = clickMe;</p>
                </div>

                <p><b>HTML</b></p>

                <div class="main__wrapper-box_grey">
                    <p>&lsaquo;button id="btn">Press!&lsaquo;/button></p>
                </div>
                <p>В другом способе скобки нужны, так как браузер создаёт событие с телом из значения атрибута.</p>

                <p><b>JavaScript</b></p>

                <div class="main__wrapper-box_grey">
                    <p>function clickMe() {</p>
                    <blockquote>alert('Clicked!')</blockquote>
                    <p>}</p>
                </div>

                <p><b>HTML</b></p>

                <div class="main__wrapper-box_grey">
                    <p>&lsaquo;button onclick="click()" id="btn">Press&lsaquo;/button></p>
                </div>

                <blockquote>2. Через <em>JavaScript</em>, используя <em>addEventListener</em>.</blockquote>


                <h2>Назначение события ч.2</h2>
                <hr class="hr">

                <div class="main__wrapper-box_grey">
                    <p>У предыдущего способа есть явный минус — больше одного обработчика события добавлять НЕЛЬЗЯ.
                        Также существуют события, которые нельзя назначить через <em>DOM</em>-свойство, но можно через
                        <em>addEventListener</em>. Например, событие <em>DOMContentLoaded</em>, которое срабатывает,
                        когда завершена
                        загрузка и построение <em>DOM</em>-документа.
                    </p>
                </div>

                <p>Для этого существует специальный метод — <span class="green">addEventListener</span>.</p>

                <div class="main__wrapper-box_grey">
                    <p>element.addEventListener(event, handler [, phase]);</p>
                </div>
                <p>Где:</p>
                <blockquote><em>event</em> — имя события, для которого мы хотим зарегистрировать этот обработчик;
                </blockquote>
                <blockquote><em>handler</em> — код, содержащий функцию обработчика, которую мы хотим запустить в ответ;
                </blockquote>
                <blockquote><em>phase</em> — фаза (обычно не используется, по умолчанию = false), подробнее будем
                    говорить в следующих юнитах;</blockquote>
                <blockquote><em>phase true</em> — событие будет перехвачено по дороге вниз;</blockquote>
                <blockquote><em>phase false</em> — событие будет поймано при всплытии.</blockquote>

                <div class="main__wrapper-box_grey">
                    <p>&lsaquo;button id=<span class="red"> "btn"</span>>Press&lsaquo;/button></p>
                    <p>&lsaquo;script></p>
                    <blockquote>function <span class="red">click1</span>() {</blockquote>
                    <blockquote>
                        <blockquote><span class="red">alert('Click1')</span>;</blockquote>
                    </blockquote>
                    <blockquote>};</blockquote>
                    <blockquote>function <span class="red">click2()</span> {</blockquote>
                    <blockquote>
                        <blockquote><span class="red">alert('Click2')</span>;</blockquote>
                    </blockquote>
                    <blockquote>}</blockquote>
                    <blockquote>btn.onclick = () => <span class="red">alert("The native handler")</span>;</blockquote>
                    <blockquote>btn.<span class="red">addEventListener("click"</span>, click1); // Click1</blockquote>
                    <blockquote>btn.<span class="red">addEventListener("click"</span>, click2); // Click2</blockquote>
                    <p>&lsaquo;/script></p>
                </div>
                <hr class="hr">

                <p>Задание 8.4.1</p>
                <p>Что такое событие?</p>
                <blockquote>Реакция браузера на то, что что-то произошло (действие пользователя или реакция на
                    изменения).</blockquote>
                <hr class="hr">

                <p>Задание 8.4.2</p>
                <p>Как можно задать событие?</p>
                <blockquote>Используя атрибут или DOM свойство с приставкой <span class="blue">on +event</span> и метод
                    <span class="blue">addEventListener</span>.</blockquote>

            </div>
            <!-- кнопки -->
            <div class="main__btn-box">
                <a href="page3.html" class="previous">&laquo; Назад</a>
                <a href="page5.html" class="next">Вперед &raquo;</a>
            </div>
            <div class="main__btn-box-o">
                <a href="page3.html" class="previous round">&#8249;</a>
                <a href="page5.html" class="next round">&#8250;</a>
            </div>
        </div>

        <button onclick="topFunction()" id="myBtn" title="Перейти к началу">вверх</button>

        <script async src="../script/js.js"></script>

        <!-- &lsaquo;&rsaquo;&lsaquo;/&rsaquo;
             &lsaquo;script&rsaquo;&lsaquo;/script&rsaquo; -->
        <!-- <details>
            <summary>Заголовок</summary>
            Здесь располагается скрытый контент, который будет отображен после клика по заголовку.
        </details>
    </div>
</body>

</html>